<div class="customer-analytics-container">
  <!-- Top 5 Customers Pie Chart -->
  <p-card header="Top 5 Customers by Revenue" styleClass="chart-card">
    <div class="chart-container" *ngIf="topCustomers.length > 0">
      <canvas #pieChart></canvas>
    </div>
    <div class="no-data" *ngIf="topCustomers.length === 0">
      <i class="pi pi-info-circle"></i>
      <p>No customer data available</p>
    </div>
    <div class="chart-summary" *ngIf="topCustomers.length > 0">
      <div class="summary-item" *ngFor="let customer of topCustomers; let i = index">
        <div class="color-indicator" [style.background-color]="getChartColor(i)"></div>
        <span class="customer-name">{{ customer.customerName }}</span>
        <span class="customer-amount">{{ customer.totalAmount | currency }}</span>
      </div>
    </div>
  </p-card>

  <!-- Low Moving Customers List -->
  <p-card header="Low Moving Customers" styleClass="low-customers-card">
    <div class="customers-list" *ngIf="lowMovingCustomers.length > 0">
      <div class="customer-item" *ngFor="let customer of lowMovingCustomers; let i = index">
        <div class="customer-rank">
          <span class="rank-number">{{ i + 1 }}</span>
        </div>
        <div class="customer-details">
          <h4>{{ customer.customerName }}</h4>
          <div class="customer-stats">
            <div class="stat-item">
              <i class="pi pi-shopping-cart"></i>
              <span>{{ customer.totalPlaceOrder }} orders</span>
            </div>
            <div class="stat-item">
              <i class="pi pi-dollar"></i>
              <span>{{ customer.totalAmount | currency }}</span>
            </div>
          </div>
        </div>
        <div class="customer-status">
          <p-tag value="Low Activity" severity="warning"></p-tag>
        </div>
      </div>
    </div>
    <div class="no-data" *ngIf="lowMovingCustomers.length === 0">
      <i class="pi pi-info-circle"></i>
      <p>No low moving customer data available</p>
    </div>
  </p-card>
</div>